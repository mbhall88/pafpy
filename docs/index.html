<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>pafpy</title>
<meta name="description" content="A lightweight library for working with PAF (Pairwise mApping Format) files." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/nord.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:400;font-family:Rubik,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}h1{font-size:2.5em;line-height:1.1em;color:#81a1c1}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#bf616a;font-weight:700;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{font-size:1em;line-height:1.3em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word;font-family:JetBrainsMono,Menlo,monospace}h1 code{background:transparent}pre{background:#2E3440;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}@font-face{font-family:'JetBrainsMono';src:url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2') format('woff2'),url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/web/woff/JetBrainsMono-Regular.woff') format('woff'),url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/ttf/JetBrainsMono-Regular.ttf') format('truetype');font-weight:400;font-style:normal}pre code{}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}blockquote{background:#eceff4;border-left:10px solid #d8dee9;margin:1.5em 10px;padding:0.5em 10px;quotes:"\201C""\201D""\2018""\2019";color:#4c566a}blockquote p{display:inline}</style>
<style media="screen and (min-width: 700px)">body{font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";color:#2e3440}h1,h2,h3,h4,h5,h6{font-weight:400;font-family:Rubik,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}h1{color:#81a1c1}a{color:#bf616a;font-weight:700}@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}@font-face{font-family:'JetBrainsMono';src:url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2') format('woff2'),url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/web/woff/JetBrainsMono-Regular.woff') format('woff'),url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/ttf/JetBrainsMono-Regular.ttf') format('truetype');font-weight:400;font-style:normal}code{font-size:1em;line-height:1.3em;font-family:JetBrainsMono,Menlo,monospace}pre{background:#2E3440}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}blockquote{background:#eceff4;border-left:10px solid #d8dee9;margin:1.5em 10px;padding:0.5em 10px;quotes:"\201C""\201D""\2018""\2019";color:#4c566a}blockquote p{display:inline}</style>
<style media="print">body{font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}h1,h2,h3,h4,h5,h6{font-family:Rubik,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}@font-face{font-family:'JetBrainsMono';src:url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2') format('woff2'),url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/web/woff/JetBrainsMono-Regular.woff') format('woff'),url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono/ttf/JetBrainsMono-Regular.ttf') format('truetype');font-weight:400;font-style:normal}pre code{font-size:1em;line-height:1.3em;font-family:JetBrainsMono,Menlo,monospace}}</style>
<!-- Use Rubik and Montserrat fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Rubik:wght@300;400;700&display=swap" rel="stylesheet">
<!-- Script for GitHub buttons. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title"><code>pafpy</code></h1>
</header>
<section id="section-intro">
<p>A lightweight library for working with <a href="https://github.com/lh3/miniasm/blob/master/PAF.md">PAF</a> (Pairwise mApping Format) files.</p>
<p><a href="https://github.com/mbhall88/pafpy/actions"><img alt="GitHub Workflow Status" src="https://img.shields.io/github/workflow/status/mbhall88/pafpy/Python_package"></a>
<a href="https://codecov.io/gh/mbhall88/pafpy"><img alt="codecov" src="https://codecov.io/gh/mbhall88/pafpy/branch/master/graph/badge.svg"></a>
<a href="https://pypi.org/project/pafpy/"><img alt="PyPI" src="https://img.shields.io/pypi/v/pafpy"></a>
<img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/pafpy">
<img alt="License" src="https://img.shields.io/github/license/mbhall88/pafpy">
<a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg"></a></p>
<h1 id="install">Install</h1>
<h3 id="pypi">PyPi</h3>
<pre><code class="sh">pip install pafpy
</code></pre>
<h3 id="conda">Conda</h3>
<pre><code class="sh">conda install -c bioconda pafpy
</code></pre>
<h3 id="locally">Locally</h3>
<p>If you would like to install locally, the recommended way is using <a href="https://python-poetry.org/">poetry</a>.</p>
<pre><code class="sh">git clone https://github.com/mbhall88/pafpy.git
cd pafpy
make install
# to check the library is installed run
poetry run python -c &quot;from pafpy import PafRecord;print(str(PafRecord()))&quot;
# you should see a (unmapped) PAF record printed to the terminal
# you can also run the tests if you like
make test-code
</code></pre>
<h1 id="usage">Usage</h1>
<p>If there is any functionality you feel is missing or would make <code><a title="pafpy" href="#pafpy">pafpy</a></code> more
user-friendly, please <a href="https://github.com/mbhall88/pafpy/issues">raise an issue</a> with a feature request.</p>
<h2 id="basic">Basic</h2>
<p>In the below basic usage pattern, we collect the <a href="https://lh3.github.io/2018/11/25/on-the-definition-of-sequence-identity#blast-identity">BLAST identity</a> of all primary
alignments in our PAF file into a list.</p>
<pre><code class="py">from typing import List
from pafpy import PafFile

path = &quot;path/to/sample.paf&quot;

identities: List[float] = []
with PafFile(path) as paf:
    for record in paf:
        if record.is_primary():
            identity = record.blast_identity()
            identities.append(identity)
</code></pre>
<p>Another use case might be that we want to get the identifiers of all records aligned to
a specific contig, but only keep the alignments where more than 50% of the query (read)
is aligned.</p>
<pre><code class="py">from typing import List
from pafpy import PafFile

path = &quot;path/to/sample.paf&quot;

contig = &quot;chr1&quot;
min_covg = 0.5
identifiers: List[str] = []
with PafFile(path) as paf:
    for record in paf:
        if record.tname == contig and record.query_coverage &gt; min_covg:
            identifiers.append(record.qname)
</code></pre>
<h2 id="advanced">Advanced</h2>
<h3 id="manual-openclose">Manual open/close</h3>
<p>Sometimes a <code>with</code> context manager is not appropriate, and you would like to open the
file and pass it around manually.. This can be achieved using the
<code><a title="pafpy.paffile.PafFile.open" href="paffile.html#pafpy.paffile.PafFile.open">PafFile.open()</a></code> and <code><a title="pafpy.paffile.PafFile.close" href="paffile.html#pafpy.paffile.PafFile.close">PafFile.close()</a></code> methods. As an example,
let's say we define a function that takes a <code><a title="pafpy.paffile.PafFile" href="paffile.html#pafpy.paffile.PafFile">PafFile</a></code> and counts the
number of records in it.</p>
<pre><code class="py">from pafpy import PafFile

def count_records(paf: PafFile) -&gt; int:
    &quot;&quot;&quot;Counts the number of alignments in a PAF file.&quot;&quot;&quot;
    return sum(1 for _ in paf)

path = &quot;path/to/sample.paf&quot;

paf = PafFile(path).open()
num_records = count_records(paf)
# it's good practise to close the file yourself rather than rely on the garbage collector
paf.close()
assert paf.closed
</code></pre>
<p>Admittedly, this is a contrived example, and we could have still used the context
manager, but you get the point 😉.</p>
<h3 id="compressed-input">Compressed input</h3>
<p>If your PAF file has been compressed with <a href="https://www.gnu.org/software/gzip/manual/gzip.html"><code>gzip</code></a> you don't need to do anything -
just pass the filepath as you would any other. Compression is tested by reading the
first two bytes of the file, so the filepath doesn't even need a <code>.gz</code> extension.</p>
<pre><code class="py">from pafpy import PafFile

path = &quot;sample.paf.gz&quot;

with PafFile(path) as paf:
    for record in paf:
        # do something with your records
</code></pre>
<h3 id="working-with-file-streamsobjects">Working with file streams/objects</h3>
<p>An already-open file can also be used to construct a <code><a title="pafpy.paffile.PafFile" href="paffile.html#pafpy.paffile.PafFile">PafFile</a></code> object. If
a <code>PafFile</code> is constructed with an open file like this there is no need to open the
<code>PafFile</code>.</p>
<pre><code class="py">with open(&quot;sample.paf&quot;) as fileobj:
    paf = PafFile(fileobj)
    # no need to open the paf
    for record in paf:
        # do something with record
</code></pre>
<p>If you want to use stdin as your PAF source, it is strongly recommended you use <code>"-"</code> to
construct the <code>PafFile</code>. The library will auto-detect if stdin is compressed and will
decompress it accordingly.</p>
<pre><code class="py">paf = PafFile(&quot;-&quot;)
# note: stdin is a stream so doesn't need to be opened
for record in paf:
    # do something with record
</code></pre>
<blockquote>
<p>Advanced users: If you <strong>must</strong> use <code>sys.stdin</code> and not <code>"-"</code> then please pass
<code>sys.stdin.buffer</code></p>
</blockquote>
<h3 id="fetch-individual-records">Fetch individual records</h3>
<p><code>for</code> loops aren't the only way of retrieving records in a file. You can also ask for
records manually.</p>
<pre><code class="py">from pafpy import PafFile

path = &quot;path/to/sample.paf&quot;

with PafFile(path) as paf:
    record = next(paf)
    # do something with your lonely record
</code></pre>
<h3 id="working-with-strands">Working with strands</h3>
<p>There is an enum for representing the strand field - <code><a title="pafpy.strand.Strand" href="strand.html#pafpy.strand.Strand">Strand</a></code>. It has a
couple of advantages over just using a <code>str</code>, but the main one is readability. Let's
count the number of records that mapped to the reverse strand.</p>
<pre><code class="py">from pafpy import PafFile, Strand

path = &quot;path/to/sample.paf&quot;

num_reverse = 0
with PafFile(path) as paf:
    for record in paf:
        if record.strand is Strand.Reverse:
            num_reverse += 1
</code></pre>
<p>You can convert strands to and from <code>str</code> quite easily.</p>
<pre><code class="py">from pafpy import Strand

assert Strand(&quot;+&quot;) is Strand.Forward
assert str(Strand.Reverse) == &quot;-&quot;
assert str(Strand.Unmapped) == &quot;*&quot;
</code></pre>
<h3 id="paf-records">PAF records</h3>
<p>The object you will likely spend the most time with is <code><a title="pafpy.pafrecord.PafRecord" href="pafrecord.html#pafpy.pafrecord.PafRecord">PafRecord</a></code>.
Refer to the <a href="https://pafpy.xyz/#header-submodules">API docs</a> for documentation on all the functions and member
variables this class contains.</p>
<p>Let's look at a few use cases. Construction of <code>PafRecord</code>s is quite flexible as we
wanted to make it very easy to write unit tests and construct arbitrary records without
having to create an entire PAF file to do so.<br>
There are two ways to construct a <code>PafRecord</code>:</p>
<ol>
<li>The default constructor: where you specify each member variable manually.</li>
<li>The <code><a title="pafpy.pafrecord.PafRecord.from_str" href="pafrecord.html#pafpy.pafrecord.PafRecord.from_str">PafRecord.from_str()</a></code> factory constructor: where you create a
<code>PafRecord</code> directly from a <code>str</code>.</li>
</ol>
<pre><code class="py">from pafpy import PafRecord, Strand, Tag

# default constructor
record1 = PafRecord(
        qname=&quot;query_name&quot;,
        qlen=1239,
        qstart=65,
        qend=1239,
        strand=Strand.Forward,
        tname=&quot;target_name&quot;,
        tlen=4378340,
        tstart=2555250,
        tend=2556472,
        mlen=1139,
        blen=1228,
        mapq=60,
        tags={&quot;NM&quot;: Tag.from_str(&quot;NM:i:8&quot;)},
)

# from_str factory constructor
line = &quot;query_name\t1239\t65\t1239\t+\ttarget_name\t4378340\t2555250\t2556472\t1139\t1228\t60\tNM:i:8&quot;
record2 = PafRecord.from_str(line)

assert record1 == record2
</code></pre>
<h3 id="sam-like-optional-fieldstags">SAM-like optional fields/tags</h3>
<p>Each additional column after the 12th column in a PAF file is a <a href="https://samtools.github.io/hts-specs/SAMtags.pdf">SAM-like tag</a>. The
<code><a title="pafpy.tag.Tag" href="tag.html#pafpy.tag.Tag">Tag</a></code> class tries to make working with tags simple. You can extract tags from
a <code>PafRecord</code> using <code><a title="pafpy.pafrecord.PafRecord.get_tag" href="pafrecord.html#pafpy.pafrecord.PafRecord.get_tag">PafRecord.get_tag()</a></code>, or you may like to construct
one yourself.<br>
Let's look at some of these options.</p>
<pre><code class="py">from pafpy import PafRecord, Tag

line = &quot;query_name\t1239\t65\t1239\t+\ttarget_name\t4378340\t2555250\t2556472\t1139\t1228\t60\tNM:i:8&quot;
record = PafRecord.from_str(line)

tag = record.get_tag(&quot;NM&quot;)
assert tag.tag == &quot;NM&quot;
assert tag.type == &quot;i&quot;
assert tag.value == 8

# we can construct tags from scratch with a str
tag = Tag.from_str(&quot;tp:A:P&quot;)
assert tag.value == &quot;P&quot;

# or with the default constructor
tag = Tag(tag=&quot;de&quot;, type=&quot;f&quot;, value=0.2)
</code></pre>
<p>One thing to notice is that the <code>value</code> is in the correct type as specified in the <a href="https://samtools.github.io/hts-specs/SAMtags.pdf">tag
specs</a>. However, if you define a <code>Tag</code> with the default constructor, you can bypass
this. The <code><a title="pafpy.tag.Tag.from_str" href="tag.html#pafpy.tag.Tag.from_str">Tag.from_str()</a></code> method validates the tag string to ensure it strictly
matches the specifications. As such, we recommend using this method when constructing
tags. But, there may be cases where you don't want to adhere to this convention, and in
those cases, use the default constructor.</p>
<pre><code class="py">from pafpy import Tag, InvalidTagFormat

# type 'i' signifies an integer
tag = Tag(tag=&quot;NM&quot;, type=&quot;i&quot;, value=&quot;foo&quot;)
assert tag.value == &quot;foo&quot;

# if we try and do this with from_str we get an error
tag = None
err_msg = &quot;&quot;
try:
    tag = Tag.from_str(&quot;NM:i:foo&quot;)
except InvalidTagFormat as err:
    err_msg = str(err)
assert err_msg == &quot;VALUE of tag NM:i:foo is not the expected TYPE&quot;
</code></pre>
<h1 id="contributing">Contributing</h1>
<p>Contributions are very welcome. Please ensure all of your contributions are made via a
pull request from a fork.</p>
<h2 id="setup">Setup</h2>
<p>The recommended development environment is through <a href="https://python-poetry.org/">poetry</a>. If you prefer to
use something else that is fine, but beware it could lead to different environment
behaviour. The <a href="https://github.com/mbhall88/pafpy/blob/master/poetry.lock"><code>poetry.lock</code></a> file under version control should ensure you are
set up with the same environment as anyone else contributing to the library. Most
of the standard development tasks are managed through a <code>Makefile</code>. The
<a href="https://github.com/mbhall88/pafpy/blob/master/Makefile"><code>Makefile</code></a> assumes that you are using <code>poetry</code>.</p>
<p>After cloning your fork locally and entering the project directory, you can set up the
poetry environment with</p>
<pre><code class="sh">make install
</code></pre>
<h2 id="formatting">Formatting</h2>
<p>All code is formatted with <code>black</code> and <code>isort</code>.</p>
<pre><code class="sh">make fmt
</code></pre>
<h2 id="linting">Linting</h2>
<p><code>flake8</code> handles linting. Please ensure there are no warnings before pushing any
work.</p>
<pre><code class="sh">make lint
</code></pre>
<h2 id="testing">Testing</h2>
<p>To test both the code and documentation, run</p>
<pre><code class="sh">make test
</code></pre>
<h3 id="code">Code</h3>
<p>All unit tests are contained in the <code>tests</code> directory. If you add any code, please
ensure it is tested. Tests are handled by <code>pytest</code>. To test just the code, without the
also testing the documentation, run</p>
<pre><code class="sh">make test-code
</code></pre>
<h3 id="docs">Docs</h3>
<p>The document testing is orchestrated by <a href="https://github.com/mbhall88/pafpy/blob/master/scripts/mdpydoctest"><code>scripts/mdpydoctest</code></a>. This
script will extract all markdown python code blocks from docstrings in python files and
write a test file with a unit test for each snippet. It then runs <code>pytest</code> on this file
to ensure all code examples in the docstrings are correct. To test the docs, run</p>
<pre><code class="sh">make test-docs
</code></pre>
<h3 id="coverage">Coverage</h3>
<p>Please keep the project's code coverage as high as possible. To check the code
coverage, run</p>
<pre><code class="sh">make coverage
</code></pre>
<p>This should show the coverage on the terminal and also open an HTML report in your web
browser.</p>
<h2 id="documentation">Documentation</h2>
<p>The code is documented using markdown docstrings. The convention this project follows is
akin to that used by the <a href="https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#making-useful-documentation-comments">Rust programming language</a>. The beginning of the docstring
should explain what the function does and if it returns anything. This is followed,
where relevant, by an example section <code>## Example</code>. All examples should be valid,
self-contained examples that can be copied and pasted into a python shell and executed
successfully (assuming the user has <code><a title="pafpy" href="#pafpy">pafpy</a></code> installed). These code snippets must be in a
code block annotated as <code>py</code> or <code>python</code>. See the code for examples. If the code being
documented can raise an exception, the type(s) of errors should be documented in an
<code>## Errors</code> section also.</p>
<p>The documentation can be served locally in a browser so that you can view changes in realtime by running</p>
<pre><code class="sh">make serve-docs
</code></pre>
<p>and then navigating to the URL printed in the terminal (most likely <a href="http://localhost:8080">http://localhost:8080</a>).</p>
<p>The docs can also be built by running</p>
<pre><code class="sh">make docs
</code></pre>
<p>Then open <code>docs/index.html</code> to view the documentation that will be deployed on pushing to <code>master</code>.</p>
<h2 id="committing">Committing</h2>
<p>There is a convenience rule in the <code>Makefile</code> that can be run prior to committing that
will run most of the above tasks for you</p>
<pre><code class="sh">make precommit
</code></pre>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;A lightweight library for working with [PAF][PAF] (Pairwise mApping Format) files.

[![GitHub Workflow Status](https://img.shields.io/github/workflow/status/mbhall88/pafpy/Python_package)](https://github.com/mbhall88/pafpy/actions)
[![codecov](https://codecov.io/gh/mbhall88/pafpy/branch/master/graph/badge.svg)](https://codecov.io/gh/mbhall88/pafpy)
[![PyPI](https://img.shields.io/pypi/v/pafpy)](https://pypi.org/project/pafpy/)
![PyPI - Python Version](https://img.shields.io/pypi/pyversions/pafpy)
![License](https://img.shields.io/github/license/mbhall88/pafpy)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)


# Install

### PyPi

```sh
pip install pafpy
```

### Conda

```sh
conda install -c bioconda pafpy
```

### Locally

If you would like to install locally, the recommended way is using [poetry][poetry].

```sh
git clone https://github.com/mbhall88/pafpy.git
cd pafpy
make install
# to check the library is installed run
poetry run python -c &#34;from pafpy import PafRecord;print(str(PafRecord()))&#34;
# you should see a (unmapped) PAF record printed to the terminal
# you can also run the tests if you like
make test-code
```

.. include:: ../docs/USAGE.md

[poetry]: https://python-poetry.org/
[PAF]: https://github.com/lh3/miniasm/blob/master/PAF.md
[docs]: https://pafpy.xyz
[blast]: https://lh3.github.io/2018/11/25/on-the-definition-of-sequence-identity#blast-identity
[contribute]: https://github.com/mbhall88/pafpy/blob/master/CONTRIBUTING.md

.. include:: ../CONTRIBUTING.md
&#34;&#34;&#34;
from pafpy.__version__ import __version__  # noqa: F401
from pafpy.paffile import PafFile  # noqa: F401
from pafpy.pafrecord import AlignmentType, MalformattedRecord, PafRecord  # noqa: F401
from pafpy.strand import Strand  # noqa: F401
from pafpy.tag import InvalidTagFormat, Tag, TagType, UnknownTagTypeChar  # noqa: F401</code></pre>
</details>
</section>
<section>
<h1 class="section-title" id="header-submodules">API documentation</h1>
<dl>
<dt><code class="name"><a title="pafpy.paffile" href="paffile.html">pafpy.paffile</a></code></dt>
<dd>
<div class="desc"><p>This module contains objects for working with PAF files.</p>
<p>The main class of interest here is <code><a title="pafpy.paffile.PafFile" href="paffile.html#pafpy.paffile.PafFile">PafFile</a></code>. It provides an interface to open/close
a PAF file and to iterate over the alignment records within the file.</p>
<p>To use <code>PafFile</code> within your code, import it like so</p>
<pre><code class="py">from pafpy import PafFile
</code></pre></div>
</dd>
<dt><code class="name"><a title="pafpy.pafrecord" href="pafrecord.html">pafpy.pafrecord</a></code></dt>
<dd>
<div class="desc"><p>This module contains objects for working with single alignment records within a PAF
file.</p>
<p>The main class of interest here is <code><a title="pafpy.pafrecord.PafRecord" href="pafrecord.html#pafpy.pafrecord.PafRecord">PafRecord</a></code>. It provides a set of member
variables relating to each field within the record, as well as some convenience methods
for common tasks.</p>
<p>To use <code>PafRecord</code> within your code, import it like so</p>
<pre><code class="py">from pafpy import PafRecord
</code></pre></div>
</dd>
<dt><code class="name"><a title="pafpy.strand" href="strand.html">pafpy.strand</a></code></dt>
<dd>
<div class="desc"><p>A module containing objects relating to the strand field within a PAF file.</p>
<p>The main class of interest here is <code><a title="pafpy.strand.Strand" href="strand.html#pafpy.strand.Strand">Strand</a></code>. To use it within your code, import it like so</p>
<pre><code class="py">from pafpy import Strand
</code></pre></div>
</dd>
<dt><code class="name"><a title="pafpy.tag" href="tag.html">pafpy.tag</a></code></dt>
<dd>
<div class="desc"><p>A module for wrapping SAM-like optional fields (tags) generally used in PAF files.</p>
<p>The full specifications can be found <a href="https://samtools.github.io/hts-specs/SAMtags.pdf">here</a>.</p>
<p>The main class of interest in this module is <code><a title="pafpy.tag.Tag" href="tag.html#pafpy.tag.Tag">Tag</a></code>. It can be imported into your
project like so</p>
<pre><code class="py">from pafpy import Tag
</code></pre></div>
</dd>
<dt><code class="name"><a title="pafpy.utils" href="utils.html">pafpy.utils</a></code></dt>
<dd>
<div class="desc"><p>This module contains utility functions unlikely to be of use to anyone else.</p>
<pre><code class="py">from pafpy.utils import first_n_bytes, is_compressed
</code></pre></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="pafpy Home" href="https://pafpy.xyz">
<img src="https://raw.githubusercontent.com/mbhall88/pafpy/master/docs/logo.png"
alt="logo" height="150" style="float: right;">
</a>
</header>
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#install">Install</a><ul>
<li><a href="#pypi">PyPi</a></li>
<li><a href="#conda">Conda</a></li>
<li><a href="#locally">Locally</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#advanced">Advanced</a><ul>
<li><a href="#manual-openclose">Manual open/close</a></li>
<li><a href="#compressed-input">Compressed input</a></li>
<li><a href="#working-with-file-streamsobjects">Working with file streams/objects</a></li>
<li><a href="#fetch-individual-records">Fetch individual records</a></li>
<li><a href="#working-with-strands">Working with strands</a></li>
<li><a href="#paf-records">PAF records</a></li>
<li><a href="#sam-like-optional-fieldstags">SAM-like optional fields/tags</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributing">Contributing</a><ul>
<li><a href="#setup">Setup</a></li>
<li><a href="#formatting">Formatting</a></li>
<li><a href="#linting">Linting</a></li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#code">Code</a></li>
<li><a href="#docs">Docs</a></li>
<li><a href="#coverage">Coverage</a></li>
</ul>
</li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#committing">Committing</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">API documentation</a></h3>
<ul>
<li><code><a title="pafpy.paffile" href="paffile.html">pafpy.paffile</a></code></li>
<li><code><a title="pafpy.pafrecord" href="pafrecord.html">pafpy.pafrecord</a></code></li>
<li><code><a title="pafpy.strand" href="strand.html">pafpy.strand</a></code></li>
<li><code><a title="pafpy.tag" href="tag.html">pafpy.tag</a></code></li>
<li><code><a title="pafpy.utils" href="utils.html">pafpy.utils</a></code></li>
</ul>
</li>
</ul>
<br>
<br>
<a href="https://github.com/mbhall88/pafpy" title="Go to the Github project">
<img src="https://major.io/wp-content/uploads/2014/08/github.png" height="40" style="vertical-align: bottom;">
</a>
<a class="github-button" href="https://github.com/mbhall88/pafpy/subscription" data-icon="octicon-eye" data-size="large" aria-label="Watch mbhall88/pafpy on GitHub">Watch</a>
<a class="github-button" href="https://github.com/mbhall88/pafpy" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star mbhall88/pafpy on GitHub">Star</a>
<a class="github-button" href="https://github.com/mbhall88/pafpy/issues" data-icon="octicon-issue-opened" data-size="large" aria-label="Issue mbhall88/pafpy on GitHub">Issue</a>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>